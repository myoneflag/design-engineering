{
  "name": "h2x-docker",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "dependencies": {
    "npm-run-all": "^4.1.5"
  },
  "devDependencies": {},
  "scripts": {
    "dev": "docker-compose --profile dev up -d",
    "logs": "docker-compose --profile dev logs --follow --tail=100",    
    "build": "docker-compose --profile prod build",
    "build-web": "docker-compose build prod-web",
    "build-worker": "docker-compose build prod-worker",    
    "rebuild-dev": "docker-compose --profile dev build",
    "clean": "rm *-Dockerrun.aws.json",
    "login": "source config/config.${EnvName}.env && aws ecr get-login-password --region us-west-1 --profile ${AWSProfile} | docker login --username AWS --password-stdin 891449579858.dkr.ecr.us-west-1.amazonaws.com",
    "tag": "source config/config.${EnvName}.env && docker tag h2x-prod-web:latest ${WEB_REMOTE_IMAGE_TAG} && docker tag h2x-prod-worker:latest ${WORKER_REMOTE_IMAGE_TAG}",
    "prep": "source config/config.${EnvName}.env && sed \"s#_IMAGE_NAME_#${WEB_REMOTE_IMAGE_TAG}#g\" Dockerrun.aws.template.json > ${WEB_DOCKERRUN_FILE} && sed \"s#_IMAGE_NAME_#${WORKER_REMOTE_IMAGE_TAG}#g\" Dockerrun.aws.template.json > ${WORKER_DOCKERRUN_FILE}",
    "push": "source config/config.${EnvName}.env && docker push ${WEB_REMOTE_IMAGE_TAG} && docker push ${WORKER_REMOTE_IMAGE_TAG}",
    "publish": "source config/config.${EnvName}.env && run-s tag prep push"
  },
  "author": "",
  "license": "ISC"
}
